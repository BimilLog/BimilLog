# ??
spring.application.name=bimillog.core
spring.profiles.default=prod

# ???
spring.datasource.hikari.minimum-idle=50
spring.datasource.hikari.maximum-pool-size=100
spring.datasource.hikari.connection-timeout=15000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.housekeeping-period-ms=300000
spring.data.redis.timeout=150ms

# ??
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterAccess=600s

# Lifecycle ??
spring.lifecycle.timeout-per-shutdown-phase=30s

# ??
server.tomcat.threads.max=200
server.tomcat.threads.min-spare=40
server.tomcat.accept-count=70
server.tomcat.connection-timeout=40000
server.tomcat.uri-encoding=UTF-8

# HTTP
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,application/json
server.compression.min-response-size=1024
server.compression.uri-encoding=UTF-8

# ??
server.shutdown=graceful

# Servlet
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.force=true
server.servlet.encoding.enabled=true

# Actuator
management.endpoints.web.exposure.include= *
management.metrics.export.<registry>.enabled=true
management.metrics.export.defaults.enabled=true

# Prometheus Metrics
management.metrics.export.prometheus.enabled=true
management.endpoint.health.show-details=always
management.health.circuitbreakers.enabled=true
management.health.bulkheads.enabled=true

# Kakao
spring.kakao.client-id=${KAKAO_CLIENT_ID}
spring.kakao.client-secret=${KAKAO_CLIENT_SECRET}
spring.kakao.admin-key=${KAKAO_ADMIN_KEY}

# Naver
spring.naver.client-id=${NAVER_CLIENT_ID}
spring.naver.client-secret=${NAVER_CLIENT_SECRET}

# Google
spring.google.client-id=${GOOGLE_CLIENT_ID}
spring.google.client-secret=${GOOGLE_CLIENT_SECRET}

# Retry
retry.max-attempts=3
retry.backoff.delay=1000
retry.backoff.multiplier=1.5

# Circuit Breaker - 실시간 인기글 Redis 쓰기
resilience4j.circuitbreaker.instances.realtimeRedis.sliding-window-type=COUNT_BASED
resilience4j.circuitbreaker.instances.realtimeRedis.sliding-window-size=5
resilience4j.circuitbreaker.instances.realtimeRedis.minimum-number-of-calls=3
resilience4j.circuitbreaker.instances.realtimeRedis.failure-rate-threshold=50
resilience4j.circuitbreaker.instances.realtimeRedis.wait-duration-in-open-state=60s
resilience4j.circuitbreaker.instances.realtimeRedis.permitted-number-of-calls-in-half-open-state=3
resilience4j.circuitbreaker.instances.realtimeRedis.automatic-transition-from-open-to-half-open-enabled=true
resilience4j.circuitbreaker.instances.realtimeRedis.record-exceptions=org.springframework.data.redis.RedisConnectionFailureException,org.springframework.data.redis.RedisSystemException,io.lettuce.core.RedisCommandTimeoutException
resilience4j.circuitbreaker.instances.realtimeRedis.ignore-exceptions=org.springframework.data.redis.serializer.SerializationException
